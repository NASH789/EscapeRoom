<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Haunted Co-op Escape</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div id="overlay">
    <div class="panel">
      <h1>Haunted House: Alone Together ðŸ‘»</h1>
      <p>
        Two players, two perspectives. Youâ€™ll each see different clues.
        Talk to escape.
      </p>
      <div class="row">
        <input id="seed" placeholder="Game code (leave blank to generate)" />
        <button id="gen">Generate Links</button>
      </div>
      <p class="ghost">Send one link to each player. Use voice call for best vibes.</p>
      <hr style="border:0;border-top:1px solid rgba(255,255,255,.14);margin:14px 0">
      <div class="row">
        <a id="p1" class="pill" href="#" style="text-decoration:none;">Player 1 Link</a>
        <a id="p2" class="pill" href="#" style="text-decoration:none;">Player 2 Link</a>
      </div>
      <p class="ghost">Tip: if previews cache, add <b>?v=1</b> to the end of the URL.</p>
    </div>
  </div>

  <script>
    function randSeed(){
      const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
      let s = "";
      for (let i=0;i<6;i++) s += chars[Math.floor(Math.random()*chars.length)];
      return s;
    }
    function updateLinks(seed){
      const base = location.href.replace(/index\.html.*$/,"").replace(/\?.*$/,"");
      document.getElementById("p1").href = `${base}p1.html?g=${encodeURIComponent(seed)}`;
      document.getElementById("p2").href = `${base}p2.html?g=${encodeURIComponent(seed)}`;
      document.getElementById("p1").textContent = `Player 1: ${seed}`;
      document.getElementById("p2").textContent = `Player 2: ${seed}`;
    }
    document.getElementById("gen").addEventListener("click", () => {
      const v = (document.getElementById("seed").value || "").trim().toUpperCase();
      updateLinks(v || randSeed());
    });
    updateLinks(randSeed());
  </script>
</body>
</html>
